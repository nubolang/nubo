event every();
event updateViews(count: int);

// Server instantiated every time a request is made to it
server {
    // Static means that the variable is shared across all instances of the App component
    static views = 0;

    request every() {
        views++;
        pub updateViews(views);
    }
    // Current users App component will not update
    // because it's not rendered yet, but other users will see the updated count.

    sub every() {} // events are ws messages under the hood -> { "event": "update", "data": [ 0 ] }

    // Finally render the page to the current user.
    return App(views);
}

// Client instantiated every time a request is made to it
client App(views) {
    // subscribe to the updateViews event
    sub updateViews(count) {
        // update the view count on the page
        views = count;
    }

    // render the view count on the page
    return <h1>{ views }</h1>;
}
